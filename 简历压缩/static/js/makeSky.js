var addEvent=function(t,e){var i=function(t){var e=t.type;return"DOMMouseScroll"!=e&&"mousewheel"!=e||(t.delta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),t.srcElement&&!t.target&&(t.target=t.srcElement),t.preventDefault||void 0===t.returnValue||(t.preventDefault=function(){t.returnValue=!1}),t};return t.addEventListener?function(t,e,n,a){"mousewheel"===e&&void 0!==document.mozHidden&&(e="DOMMouseScroll"),t.addEventListener(e,function(t){n.call(this,i(t))},a||!1)}:t.attachEvent?function(e,n,a){e.attachEvent("on"+n,function(n){n=n||t.event,a.call(e,i(n))})}:function(){}}(window),makeSky=function(t,e,i){function n(t,e){if(arguments.length<2&&(e=t,t=0),t>e){var i=e;e=t,t=i}return Math.floor(Math.random()*(e-t+1))+t}function a(t,e){var i=Math.max(t,e);return Math.round(Math.sqrt(i*i+i*i))/2}function o(t,e){this.orbitRadius=n(a(t,e)),this.radius=n(60,this.orbitRadius)/8,this.orbitX=t/2,this.orbitY=e/2,this.timePassed=n(0,E),this.speed=n(this.orbitRadius)/5e4,this.alpha=n(2,10)/10,g[++v]=this}function r(t,e){if(M)M=!1;else{p.globalCompositeOperation="source-over",p.globalAlpha=.3,p.fillRect(0,0,t,e),p.globalCompositeOperation="lighter";for(var i=1,n=g.length;i<n;i++)g[i].draw();u(function(){r(t,e)})}}function s(){q?q=!1:b<800&&(D?(x=P,b+=P):b+=x=x>S?x-.01:S,w.style.transform="translate3d(0,0,"+b+"px)",+new Date-H>1e3&&(I&&I(b),H=+new Date),c=u(s))}function l(t,e){v=0;for(var i=0;i<E;i++)new o(t,e)}function h(){d&&d(c),m=!0}var u=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,d=e.cancelRequestAnimationFrame||e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame,c=null,m=!1,f=t.getElementById("wrapper-cvs"),p=f.getContext("2d");f.width=t.documentElement.clientWidth,f.height=t.documentElement.clientHeight;var w=t.getElementById("j-stage-block-back"),g=[],v=0,b=0,E=500,C=document.createElement("canvas"),R=C.getContext("2d");C.width=100,C.height=100;var A=C.width/2,F=R.createRadialGradient(A,A,0,A,A,A),M=!1,q=!1;F.addColorStop(.025,"#CCC"),F.addColorStop(.1,"hsl(217, 61%, 33%)"),F.addColorStop(.25,"hsl(217, 64%, 6%)"),F.addColorStop(1,"transparent"),R.fillStyle=F,R.beginPath(),R.arc(A,A,A,0,2*Math.PI),R.fill(),o.prototype.draw=function(){var t=Math.sin(this.timePassed)*this.orbitRadius+this.orbitX,e=Math.cos(this.timePassed)*this.orbitRadius+this.orbitY,i=n(10);1===i&&this.alpha>0?this.alpha-=.05:2===i&&this.alpha<1&&(this.alpha+=.05),p.globalAlpha=this.alpha,p.drawImage(C,t-this.radius/2,e-this.radius/2,this.radius,this.radius),this.timePassed+=x>S?this.speed*x*k:this.speed};var y,D=!1,S=.2,k=1/S,P=1,x=S,H=+new Date,I=null;return{init:function(e){"function"==typeof e&&(I=e),i(t.body,"mousewheel",function(t){if(!m&&t.delta<0&&b<800){if(clearTimeout(y),y=setTimeout(function(){D=!1,x=P},500),D)return;D=!0}}),f.width=t.documentElement.clientWidth,f.height=t.documentElement.clientHeight,l(f.width,f.height),u(function(){r(f.width,f.height),s()})},restart:function(){M=!0,q=!0,f.width=t.documentElement.clientWidth,f.height=t.documentElement.clientHeight,l(f.width,f.height),u(function(){r(f.width,f.height),s()})},stop:h,backToStart:function(t){w.style.transition="all 1s",h(),w.style.transform="translate3d(0,0,0)",setTimeout(t,1e3)}}}(document,window,addEvent);