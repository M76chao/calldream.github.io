<!DOCTYPE html><html><head lang="en"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>BY_MLC</title><style>.none{display:none}li{display:inline-block;width:30px;height:30px;background-color:#e0e0e0;list-style:none;border:1px #000 solid;text-align:center}#one{background-color:#e0e0e0;text-align:center;overflow:hidden}h1{font-size:16px;margin-top:30px;font-weight:500}#begin{display:inline-block;font:500 50px/45px "微软雅黑";color:#000;padding:5px;border:5px #000 dashed;text-decoration:none;margin-top:60px;margin-bottom:30px}#begin:active{color:red}#self input{width:26px;margin-right:5px}#self{margin-top:30px}#warn{margin:30px 0;color:red}#father{border:2px #000 solid;white-space:nowrap;position:absolute;top:35px}#title{position:absolute;top:-32px}#titl{float:left}#titr{float:right;margin-right:10px}#end{height:56px;background-color:#000;color:#fff;font:40px "微软雅黑";text-align:center;position:fixed;bottom:0}#pink{background-color:pink;padding:2px}#gray{color:gray;font-weight:600;padding:2px}#moshi{margin-top:15px}</style></head><body><div id="one"><input id="moshi" type="button" value="普通模式"><h1>数字代表它所在的九宫格一共有几个炸弹，找出所有不是炸弹的位置，获取胜利</h1><a id="begin" href="#" onclick="return!1">开始游戏</a><div id="degree"><input id="easy" type="radio" checked name="degree">简单 <input id="hard" type="radio" name="degree">一般 <input id="custom" type="radio" name="degree">自定义<div id="self" class="none">横：<input id="sw" type="text" value="30"> 竖：<input id="sh" type="text" value="16"> 炸弹：<input id="sboon" type="text" value="80"><br><div id="warn" class="none">请输入正确的数字!</div></div></div></div><div id="father" class="none"><div id="title"><div id="titl"><input type="button" value="标记" id="pink"> <input type="button" value="标记" id="gray"></div><div id="titr"></div></div><div id="centent"></div></div><div id="end" class="none">再来一次</div><script>function $(n){return document.getElementById(n)}function oneing(){var n=9,e=9,i=9,t=$("easy"),o=$("hard"),l=$("custom"),a=$("self");moshi.onclick=function(){"普通模式"===moshi.value?(moshi.value="破解模式",jieshao.innerHTML="炸弹哑火了，建议不要使用金手指，这样对炸弹不公平"):(moshi.value="普通模式",jieshao.innerHTML="经典扫雷，数字代表它所在的九宫格一共有几个炸弹，找出所有不是炸弹的位置，获取胜利")},t.onclick=function(){a.className="none"},o.onclick=function(){a.className="none"},l.onclick=function(){a.className=""},begin.onclick=function(){one.className="none",t.checked&&(n=9,e=9,i=9),o.checked&&(n=9,e=9,i=17),l.checked&&(n=$("sw").value/1,e=$("sh").value/1,i=$("sboon").value/1),e&&n&&i?(fu.className="",jitime(),makeli(n,e),makezd(i,n,e),makenum(),css(),yunxing()):$("warn").style.display="block"}}function css(){winw>centent.offsetWidth?(fu.style.left=(winw-centent.offsetWidth)/2+"px",title.style.width=fu.offsetWidth+"px",end.style.width=fu.offsetWidth+"px",end.style.left=fu.style.left):(title.style.width=winw-10+"px",end.style.width=winw+"px"),winh>centent.offsetHeight-56?end.style.top=winh-fu.offsetTop-fu.offsetHeight+10+"px":end.style.bottom="0px"}function jitime(){var n=0,e=0,i=$("titr");i.innerHTML="用时："+e+"分"+n+"秒",timer=setInterval(function(){60===++n&&(n=0,e++),i.innerHTML="用时："+e+"分"+n+"秒",60===e&&(clearInterval(timer),i.innerHTML="我懒得数了，太久了……")},1e3)}function makeli(n,e){for(var i=[],t=1;t<=e;t++){for(var o=1;o<=n;o++)i.push("<li id=x"+o+"y"+t+">.</li>");i.push("</br>")}centent.innerHTML=i.join("")}function makezd(n,e,i){for(var t=0;t<n;t++){var o=Math.ceil(Math.random()*(e-1)),l=Math.ceil(Math.random()*(i-1)),a=document.getElementById("x"+o+"y"+l);a.boon?t--:(a.boon="boon",zhadan.push(a),a.className="bbbbbbbbbbbb")}}function makenum(){for(var n=0;n<zili.length;n++){var e=0;if("boon"!==zili[n].boon){for(var i=jiug(zili[n]),t=0;t<i.length;t++)"boon"==i[t].boon&&e++;zili[n].num=e}else zili[n].num="爆"}}function jiug(n){var e=n.id.split("y"),i=e[1]/1,t=e[0].split("x").join("")/1,o=[];o=[$("x"+(t-1)+"y"+(i+1)),$("x"+t+"y"+(i+1)),$("x"+(t+1)+"y"+(i+1)),$("x"+(t-1)+"y"+i),$("x"+(t+1)+"y"+i),$("x"+(t-1)+"y"+(i-1)),$("x"+(t+1)+"y"+(i-1)),$("x"+t+"y"+(i-1))];for(var l=0;l<o.length;l++)o[l]||(o.splice(l,1),l--);return o}function yunxing(){var n=null,e=document.getElementById("pink"),i=document.getElementById("gray");e.onclick=function(){n="pink"},i.onclick=function(){n="#808080"};for(var t=0;t<zili.length;t++)zili[t].onclick=function(){if(this.innerHTML!==this.num){if(n)return this.style.backgroundColor=n,void(n=null);if(this.boon)return"普通模式"!==moshi.value?void(this.style.backgroundColor="pink"):(this.style.backgroundColor="red",this.innerHTML=this.num,zhadan.splice(zhadan.indexOf(this),1),void gover());qingchu(this),"&nbsp;"==this.num&&youhua(this),baihezi>=zili.length-zhadan.length&&win()}}}function qingchu(n){n.style.backgroundColor="#fff",0==n.num&&(n.num="&nbsp;"),n.innerHTML=n.num,n.bai="bai",baihezi++}function youhua(n){console.log(1);var e=jiug(n);n.id=null;for(var i=0;i<e.length;i++)"bai"!=e[i].bai&&(qingchu(e[i]),"&nbsp;"==e[i].num&&youhua(e[i]))}function gover(){clearInterval(timer);var n=null,e=0;n=setInterval(function(){e<zhadan.length&&(zhadan[e].style.backgroundColor="red"),++e==zhadan.length&&clearInterval(n)},250),alert("游戏结束"),end.className="end"}function win(){clearInterval(timer),alert("( •̀ ω •́ )y游戏胜利( •̀ ω •́ )y");var n=null,e=0;n=setInterval(function(){e<zhadan.length&&(zhadan[e].style.backgroundColor="#0E88EB",zhadan[e].innerText=zhadan[e].num),++e==zhadan.length&&clearInterval(n)},250),end.className="end"}console.log("8.21：现在来看的确有好多地方没有做优化，本来想改一下的，但是也算是记录青春的一种方式吧");var one=$("one"),end=$("end"),begin=$("begin"),fu=$("father"),centent=$("centent"),title=$("title"),zili=fu.getElementsByTagName("li"),zhadan=[],baihezi=0,winh=window.innerHeight,winw=window.innerWidth,timer=null,moshi=document.getElementById("moshi"),jieshao=moshi.nextElementSibling;one.style.height=winh+"px",oneing(),window.onscroll=function(){title.style.left=window.pageXOffset+"px"},end.onclick=function(){window.location.reload()}</script></body></html>